# Structure Steering Document

## Directory Structure
```
pv/
├── cmd/                    # CLI commands
│   ├── root.go            # Root command
│   ├── auth.go            # Auth parent command
│   ├── auth_login.go      # Login subcommand
│   ├── auth_status.go     # Status subcommand
│   ├── auth_logout.go     # Logout subcommand
│   ├── list.go            # List command
│   ├── add.go             # Add command (to be created)
│   ├── delete.go          # Delete command (to be created)
│   ├── get.go             # Get command (to be created)
│   ├── share.go           # Share command (to be created)
│   └── sync.go            # Sync command (to be created)
├── internal/              # Internal packages
│   ├── di/               # Dependency injection
│   │   ├── wire.go       # Wire configuration
│   │   └── wire_gen.go   # Generated by Wire
│   ├── infra/            # Infrastructure layer
│   │   ├── store.go      # Store interface
│   │   ├── memory_store.go # In-memory implementation
│   │   ├── gist_store.go   # GitHub Gist implementation (to be created)
│   │   └── local_store.go  # Local file cache (to be created)
│   ├── model/            # Domain models
│   │   └── prompt.go     # Prompt model
│   ├── service/          # Business logic (to be created)
│   │   ├── prompt_service.go
│   │   └── auth_service.go    # Authentication service
│   ├── config/           # Configuration (to be created)
│   │   ├── config.go     # Config management
│   │   └── store.go      # Config storage implementation
│   ├── auth/             # Authentication package (to be created)
│   │   ├── github_client.go  # GitHub API client
│   │   └── token_validator.go # Token validation logic
│   └── errors/           # Error handling (to be created)
│       ├── errors.go     # Custom error types
│       └── handler.go    # Error handler middleware
├── test/                 # Integration tests (to be created)
├── main.go              # Entry point
├── go.mod               # Go module file
└── go.sum               # Go dependencies
```

## Naming Conventions
- **Files**: lowercase with underscores (snake_case)
- **Packages**: lowercase single words
- **Types/Interfaces**: PascalCase
- **Functions/Methods**: PascalCase for exported, camelCase for private
- **Variables**: camelCase
- **Constants**: PascalCase or UPPER_SNAKE_CASE

## Code Organization Patterns
### Commands
- Each command in separate file under `cmd/`
- Implement as struct with dependencies
- Use dependency injection via Wire
- Follow pattern:
  ```go
  type AddCmd *cobra.Command
  
  type add struct {
      service service.PromptService
  }
  
  func NewAddCommand(service service.PromptService) AddCmd {
      // Implementation
  }
  ```

### Services
- Business logic in `internal/service/`
- Depend on interfaces, not implementations
- Handle orchestration between components

### Infrastructure
- All external dependencies in `internal/infra/`
- Always define interfaces first
- Concrete implementations follow interface

### Testing
- Unit tests alongside source files (`*_test.go`)
- Integration tests in `test/` directory
- Use table-driven tests where appropriate
- Mock interfaces for unit testing

## Development Workflow
1. Define interfaces first
2. Implement concrete types
3. Wire dependencies with Google Wire
4. Write tests (unit and integration)
5. Run `go generate ./internal/di` after adding new dependencies
6. Format with `go fmt ./...`
7. Lint with `go vet ./...`